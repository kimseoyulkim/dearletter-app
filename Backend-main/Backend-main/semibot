
import streamlit as st
import random

st.set_page_config(page_title="ë¬¸í•™ ì±—ë´‡ ì›¹ì•±", page_icon="ğŸ“š", layout="centered")

if "page" not in st.session_state:
    st.session_state.page = "home"
if "character" not in st.session_state:
    st.session_state.character = None
if "points" not in st.session_state:
    st.session_state.points = 0

characters = {
    "í–„ë¦¿": {
        "desc": "ë´ë§ˆí¬ì˜ ì™•ì, ì² í•™ì  ì§ˆë¬¸ì„ ë˜ì§€ëŠ” ì¸ë¬¼.",
        "quote": "To be, or not to be, that is the question.",
        "books": ["ì…°ìµìŠ¤í”¼ì–´ 4ëŒ€ ë¹„ê·¹", "ì£„ì™€ ë²Œ"]
    },
    "ì— ë§ˆ": {
        "desc": "ì‚¬ë‘ê³¼ ìì•„ë¥¼ ì°¾ì•„ê°€ëŠ” ì„¬ì„¸í•œ ì—¬ì„±.",
        "quote": "ìì‹ ì„ ì•„ëŠ” ê²ƒì´ ì§„ì •í•œ ì„±ì¥ì˜ ì‹œì‘ì´ì•¼.",
        "books": ["ì— ë§ˆ", "ì˜¤ë§Œê³¼ í¸ê²¬"]
    },
    "í™ê¸¸ë™": {
        "desc": "ë¶ˆì˜ë¥¼ ì°¸ì§€ ëª»í•˜ëŠ” ì¡°ì„ ì˜ ì˜ì .",
        "quote": "ë‚˜ëŠ” ì´ ë‚˜ë¼ì˜ ë°±ì„±ì´ ì•„ë‹ˆë€ ë§ì¸ê°€!",
        "books": ["í™ê¸¸ë™ì „", "ì¶˜í–¥ì „"]
    }
}

def navigate(page):
    st.session_state.page = page

def page_home():
    st.title("ğŸ“š ë¬¸í•™ ìºë¦­í„° ì±—ë´‡")
    st.markdown("ê³ ì „ ë¬¸í•™ ì¸ë¬¼ê³¼ ëŒ€í™”í•˜ë©° ë…ì„œë¥¼ ì¦ê²¨ë³´ì„¸ìš”!")
    st.image("https://images.unsplash.com/photo-1512820790803-83ca734da794", use_column_width=True)
    st.button("ì‹œì‘í•˜ê¸°", on_click=lambda: navigate("test"))

def page_test():
    st.header("ğŸ“– ë…ì„œ ì„±í–¥ í…ŒìŠ¤íŠ¸")
    genre = st.radio("Q1. ì–´ë–¤ ì´ì•¼ê¸°ì— ë” ëŒë¦¬ë‚˜ìš”?", ["ìš´ëª…ê³¼ ì² í•™", "ì‚¬ë‘ê³¼ ìì•„", "ì •ì˜ì™€ ëª¨í—˜"])
    if st.button("ê²°ê³¼ ë³´ê¸°"):
        if genre == "ìš´ëª…ê³¼ ì² í•™":
            st.session_state.character = "í–„ë¦¿"
        elif genre == "ì‚¬ë‘ê³¼ ìì•„":
            st.session_state.character = "ì— ë§ˆ"
        else:
            st.session_state.character = "í™ê¸¸ë™"
        navigate("character")

def page_character():
    char = st.session_state.character
    st.subheader(f"ğŸ­ ë‹¹ì‹ ì˜ ìºë¦­í„°ëŠ”: {char}")
    st.markdown(f"**ì„¤ëª…**: {characters[char]['desc']}")
    st.markdown(f"**ì¶”ì²œ ë„ì„œ**: {', '.join(characters[char]['books'])}")
    st.button("ì±—ë´‡ê³¼ ëŒ€í™”í•˜ê¸°", on_click=lambda: navigate("chat"))

def page_chat():
    char = st.session_state.character
    st.header(f"ğŸ¤– {char}ì™€ì˜ ëŒ€í™”")
    user_input = st.text_input("ë§ì„ ê±¸ì–´ë³´ì„¸ìš”:")
    if user_input:
        st.markdown(f"**ë‚˜**: {user_input}")
        response = characters[char]["quote"]
        st.markdown(f"**{char}**: {response}")
        if any(keyword in user_input for keyword in ["ë¹„ìœ ", "ìƒì§•", "í•µì‹¬"]):
            st.success("ğŸ“˜ ë¬¸í•´ë ¥ ë¯¸ì…˜ ì„±ê³µ! +10 í¬ì¸íŠ¸")
            st.session_state.points += 10
    st.button("ë§ˆì´í˜ì´ì§€ ë³´ê¸°", on_click=lambda: navigate("mypage"))

def page_mypage():
    char = st.session_state.character
    st.header("ğŸ“Š ë§ˆì´í˜ì´ì§€")
    st.metric("í¬ì¸íŠ¸", st.session_state.points)
    st.markdown(f"**ì¶”ì²œ ë„ì„œ**: {', '.join(characters[char]['books'])}")
    st.button("ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°", on_click=lambda: navigate("home"))

page_dict = {
    "home": page_home,
    "test": page_test,
    "character": page_character,
    "chat": page_chat,
    "mypage": page_mypage
}

page_dict[st.session_state.page]()



